PROJECT OVERVIEW — COSMIX

1. High Concept

Cosmix — это физическая аркадная игра в духе «тетриса по цветам», где игрок сбрасывает 2D-фигуры в стакан. Фигуры взаимодействуют по законам физики, а основная цель — собирать устойчивые цепочки фигур одного цвета, которые затем исчезают, принося очки и ресурсы.

Ключевой фокус игры — визуальная читаемость, физическое удовольствие от взаимодействия фигур и нарастающее напряжение.

⸻

2. Core Gameplay Loop
	1.	Появляется активная фигура в зоне спавна.
	2.	Игрок ведёт пальцем / мышью по горизонтали, выбирая позицию.
	3.	Отпускание → фигура падает в стакан, включается физика.
	4.	Фигуры взаимодействуют и формируют группы.
	5.	Если цепочка одного цвета ≥ 4 фигур и стабильна ≥ 1.8 секунд → происходит сокращение.
	6.	Игрок получает очки / монеты / бонусы.
	7.	Повышается уровень сложности.
	8.	Игра продолжается до Game Over.

⸻

3. Playfield & Camera (Canonical)
	•	Масштаб: 1 Unity unit = 16 px
	•	Базовое разрешение legacy: 320×480 px
	•	Видимая высота камеры: 30 units
	•	OrthographicSize: 15
	•	Камера статична, центрирована на центре стакана (0,0)

Cup Geometry (Legacy-based)
	•	Внутренняя ширина: ≈12.19 u (195 px)
	•	Внутренняя высота: ≈26 u (416 px)
	•	Толщина стенок: ≈2 u (32 px)
	•	Верх чаши: y ≈ +13 u
	•	Низ чаши: y ≈ -13 u

Zones
	•	ControlLine: y ≈ -6.1 u (legacy line)
	•	DeathLine: y ≈ +12.9 u
	•	SpawnZone: центр y ≈ +18 u, высота 4 u

⸻

4. Shapes

Types
	•	Circle
	•	Oval
	•	Pentagon
	•	Square
	•	Rectangle
	•	Triangle
	•	Diamond

Properties (Fixed)
	•	Размер — фиксированный на тип фигуры
	•	Масса — фиксированная
	•	Трение — фиксированное
	•	Упругость — фиксированная
	•	Свойства не меняются по ходу игры

Rotation
	•	Уровни 1–5: без поворота
	•	С уровня 6: случайный угол
	•	Диапазон растет линейно до уровня 10, затем capped

⸻

5. Colors
	•	Начало игры: 4 цвета
	•	Каждые 5 уровней: +1 цвет
	•	Максимум: 7 цветов

Цепочки могут формироваться только из фигур одного цвета.

⸻

6. Chain Detection
	•	Минимум фигур в цепочке: 4
	•	Касание: достаточно контакта в physics pairs
	•	Таймер стабильности: 1.8 секунды
	•	Если контактов нет ≥ 250мс → таймер сбрасывается

⸻

7. Collapse & Combo System

Combo Windows
	•	2 цепочки за 3 сек → Combo ×2
	•	3 цепочки за 6 сек → Super Combo ×3
	•	4 цепочки за 9 сек → Mega Combo ×4
	•	5 цепочек за 12 сек → Cosmo Combo ×5
	•	Далее каждые +3 сек → Cosmo Combo

⸻

8. Levels & Difficulty
	•	Старт с уровня 1
	•	Для перехода на следующий уровень требуется сократить:
L1 = 10 фигур, далее ToNextLevel = floor(prev × 1.2)

Уровень влияет на:
	•	количество очков
	•	количество монет
	•	вероятность бонусов
	•	количество цветов
	•	диапазон поворота фигур

⸻

9. Game Multiplier (Cosmometer)
	•	Старт каждого уровня: ×1
	•	Множитель не может быть < 1

Energy Rules
	•	Каждый сброс фигуры → +energy
	•	Energy постепенно охлаждается со временем (быстрее при высоком заряде)
	•	Внутренний максимум энергии — 125 (шкала отображает 0–100)

Thresholds
	•	Energy ≥ L2 → ×2
	•	Energy ≥ L3 → ×3
	•	Energy ≥ L5 → ×5

Множитель влияет на все очки и награды.

⸻

10. Bubbles (Soap Bubbles)

Spawn
	•	Появляются после сокращения цепочки с базовой вероятностью
	•	Позиция X — случайная внутри стакана
	•	Y — низ стакана или за пределами экрана

Behavior
	•	Плавно поднимаются вверх волнообразно
	•	Лопаются по нажатию
	•	Пропадают при выходе за верх экрана

⸻

11. Bubble Rewards (Distribution)

Reward Types
	•	Монеты — 40%
	•	Доп. очки — 45%
	•	Мгновенные бонусы — 12%
	•	Расходуемые бонусы — 0.1% × текущий уровень (1 за сессию)

⸻

12. Instant Bonuses
	•	Hail of Shapes (70%) — выбрасывает несколько фигур сверху
	•	Color Grenade (30%) — уничтожает все фигуры одного цвета

⸻

13. Consumable Bonuses

Types
	•	Touch to Kill — 10 сек, тап → уничтожение цепочек
	•	Machine Gun — ~10 случайных выстрелов по стакану

Rules
	•	Кулдаун: 5 минут (можно улучшить)
	•	Хранятся между сессиями

⸻

14. Progression & Shop

Upgrade Cost (Geometric)

100 → 200 → 500 → 1000 → 2000 → 5000 → 10000

Upgrades

Coin Multiplier (8 levels)
0: +0%
1: +10%
2: +30%
3: +50%
4: +75%
5: +100%
6: +150%
7: +200%

Score Multiplier — аналогично
Bonus Drop Chance
0: 5%
1: 7%
2: 10%
3: 13%
4: 15%
5: 20%
6: 30%
7: 50%

Bonus Upgrade Levels
0: базовый
1: instant бонусы 15%
2: instant бонусы 20%
3: граната 40%
4: пузырь при сбросе 5%
5: кулдаун 2 мин
6: instant всегда в пузыре (из lvl 4)
7: consumable ×5 без лимита

Shop Prices
	•	Touch to Kill — 5000 монет
	•	Machine Gun — 5000 монет

⸻

15. Scoring Formulas

Constants
	•	base = 10
	•	baseMoney = 1

Variables
	•	Count — фигур в цепочке
	•	Multiply — текущий множитель
	•	Level — уровень
	•	Combo — коэффициент комбо
	•	PointCoef — прокачка очков
	•	MoneyCoef — прокачка монет

Score on Collapse

NR = base × Level × Multiply × Count × PointCoef × Combo × ChainBonus

ChainBonus
	•	Count = 4 → 1.0
	•	Count > 4 → 1 + 0.1 × (Count − 4)

Bubble Score

PR = random(1–5) × base × Level × Multiply × PointCoef

Level Up Bonus

NLR = ToNextLevel × base × Multiply × PointCoef

Bubble Money

MR = random(1–5) × Level × Multiply × MoneyCoef


⸻

16. Game Over
	•	Вверху стакана есть линия смерти
	•	Если любая фигура касается её ≥ 10 секунд → Game Over
	•	За 5 секунд до конца:
	•	таймер
	•	звуковой отсчёт

⸻

17. Meta
	•	Очки — только рекорд
	•	Монеты — копятся между сессиями

⸻

18. Design Pillars
	•	Визуальная читаемость
	•	Физическое удовольствие
	•	Простота правил, глубина мастерства
	•	Нарастающее напряжение
	•	Минимум UI — максимум игры

⸻

Этот документ является каноническим описанием проекта Cosmix.
Изменения допускаются только осознанно и фиксируются явно.
